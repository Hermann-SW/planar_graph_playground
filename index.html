<!DOCTYPE html>
<html>
<body>

<script src="assert.js"> </script>
<script src="gauss-jordan.js"> </script>
<script src="undirected_graph.js"> </script>
<script src="tutte.js"> </script>
<script src="htmlsvg.js"> </script>
<script src="fullerenes.js"> </script>

<div><form id="myForm"> <select id="frm" size="1""> <option selected value="C20">C20</option> </select> </form> </div>
<div><label for="myRange">factor: </label><input type="range" min="50" max="120" value="100" id="myRange"></div>
<div><label for="myRange2">size: </label><input type="range" min="500" max="1800" value="800" id="myRange2"></div>

<script>"use strict";

var down = -1;
var G;

function clck(v) {
    if (down < 0) {
        down = v;
    } else {
        doit(G, down, v);
        down = -1;
    }
}

function doi(x) {
    G = F[x];
    doit(G, G[7][G[7].length - 1], 7);
}

function doit(G, v, w) {
    var slider = document.getElementById("myRange").value;
    var slider2 = document.getElementById("myRange2").value;
    var selInd = document.forms[0].elements[0].selectedIndex;
    var size = slider2;
    var r = 12;
    var coords;
    var pent;
    var spl = -1;
    var tst;
    var lmin = 99999;
    var lcur;
    var cx;
    var cy;
    var dx;
    var dy;

    var face = traverse_face(G, v, w);
    down = -1;
    if (face === -1) {
        alert("selected vertex pair not adjacent");
        return;
    }

    coords = tutte.convex_face_coordinates(G, face, slider / 100.0);

    forall_edges(G, function (v, w) {
        if (v < w) {
            cx = size / 2 + (size / 2 - r) * coords[0][v];
            cy = size / 2 + (size / 2 - r) * coords[1][v];
            dx = size / 2 + (size / 2 - r) * coords[0][w];
            dy = size / 2 + (size / 2 - r) * coords[1][w];
        }
        dx -= cx;
        dy -= cy;
        lcur = Math.sqrt(dx * dx + dy * dy);
        if (lcur < lmin) {
            lmin = lcur;
        }
    });
    if (lmin < 2 * r + 2) {
        r = lmin / 3;
    }

    pent = pentagons(G);
    if (face.length === 5) {
        tst = linear.fill(n_vertices(G), 1, false);
        face.forEach(function (v) {
            tst[v] = true;
        });
        pent.forEach(function (c, i) {
            var good = true;
            c.forEach(function (v) {
                if (!tst[v]) {
                    good = false;
                }
            });
            if (good) {
                spl = i;
            }
        });
        if (spl !== -1) {
            pent.splice(spl, 1);
            // pent.shift();
        }
    }

    htmlsvg.header(selInd, slider, slider2);

    htmlsvg.straight_line_drawing(G, coords, pent, size, r);
}

doi(0);
</script>

</body>
</html>
